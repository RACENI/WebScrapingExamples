<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Inven Detail</title>

    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont,
                         "Segoe UI", Roboto, Arial, sans-serif;
            background: #fafafa;
        }

        a {
            text-decoration: none;
            color: #333;
        }

        /* ===== ë³¸ë¬¸ ===== */
        .content-wrapper {
            max-width: 900px;
            margin: 0 auto;
        }

        .article-content {
            line-height: 1.6;
            word-break: break-word;
            background: #fff;
            padding: 20px;
            border-radius: 6px;
        }

        .article-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px 0;
        }

        /* ===== ëŒ“ê¸€ ê³µí†µ ===== */
        .comment-wrapper {
            max-width: 900px;
            margin: 40px auto 0;
        }

        .comment-section {
            background: #fff;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 30px;
        }

        .comment-section h3 {
            margin: 0 0 16px;
            font-size: 18px;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
        }

        .comment-item {
            border-bottom: 1px solid #eee;
            padding: 12px 0;
        }

        .comment-item:last-child {
            border-bottom: none;
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 6px;
            font-size: 14px;
        }

        .comment-writer {
            font-weight: bold;
            color: #222;
        }

        .comment-like {
            color: #d9534f;
            font-size: 13px;
        }

        .comment-dislike {
            color: #337ab7;
            font-size: 13px;
        }

        .comment-content {
            font-size: 14px;
            line-height: 1.5;
            color: #333;
            white-space: pre-wrap;
        }

        /* ===== ë² ìŠ¤íŠ¸ ê°•ì¡° ===== */
        .best .comment-item {
            background: #fff8e1;
            padding: 12px;
            border-radius: 4px;
        }
		
		.comment-item.reply {
		    margin-left: 30px;
		    padding-left: 12px;
		    border-left: 3px solid #ddd;
		    background: #f9f9f9;
		}

		.comment-item.reply::before {
		    content: "â†³";
		    margin-right: 6px;
		    color: #999;
		}
		
		.comment-item.blind {
		    background: #fff3f3;
		    border-left: 4px solid #d9534f;
		}

		.comment-item.blind::before {
		    content: "ğŸš« ë¸”ë¼ì¸ë“œ ëŒ“ê¸€";
		    display: block;
		    font-size: 12px;
		    color: #d9534f;
		    margin-bottom: 4px;
		}
		
		.comment-section {
		    max-height: 800px;
		    overflow-y: auto;
		}

		/* =====================
		   ë‹¤í¬ëª¨ë“œ ë³€ìˆ˜
		   ===================== */
		:root {
		    --bg-body: #fafafa;
		    --bg-card: #ffffff;
		    --text-main: #222;
		    --text-sub: #555;
		    --border-color: #e0e0e0;

		    --best-bg: #fff8e1;
		    --reply-bg: #f9f9f9;
		    --blind-bg: #fff3f3;
		}

		/* ë‹¤í¬ëª¨ë“œ */
		body.dark {
		    --bg-body: #121212;
		    --bg-card: #1e1e1e;
		    --text-main: #e6e6e6;
		    --text-sub: #aaaaaa;
		    --border-color: #333;

		    --best-bg: #2a250f;
		    --reply-bg: #252525;
		    --blind-bg: #3a1f1f;
		}

		/* =====================
		   ê³µí†µ ì ìš©
		   ===================== */
		body {
		    background: var(--bg-body);
		    color: var(--text-main);
		}

		.article-content,
		.comment-section {
		    background: var(--bg-card);
		    color: var(--text-main);
		}

		.comment-item {
		    border-bottom: 1px solid var(--border-color);
		}

		.comment-writer {
		    color: var(--text-main);
		}

		.comment-content {
		    color: var(--text-main);
		}

		/* ===== ë² ìŠ¤íŠ¸ ëŒ“ê¸€ ===== */
		.best .comment-item {
		    background: var(--best-bg);
		}

		/* ===== ëŒ€ëŒ“ê¸€ ===== */
		.comment-item.reply {
		    background: var(--reply-bg);
		    border-left-color: var(--border-color);
		}

		/* ===== ë¸”ë¼ì¸ë“œ ëŒ“ê¸€ ===== */
		.comment-item.blind {
		    background: var(--blind-bg);
		    border-left-color: #d9534f;
		}

		/* ë§í¬ */
		a {
		    color: var(--text-main);
		}

    </style>
</head>
<script>
	document.addEventListener("DOMContentLoaded", function () {
	    const btn = document.getElementById("darkToggle");
	    if (!btn) return; // ì•ˆì „ì¥ì¹˜

	    const body = document.body;

	    // ì´ì „ ì„¤ì • ë³µì›
	    if (localStorage.getItem("darkMode") === "on") {
	        body.classList.add("dark");
	        btn.innerText = "â˜€ï¸";
	    }

	    btn.addEventListener("click", () => {
	        body.classList.toggle("dark");

	        const isDark = body.classList.contains("dark");
	        btn.innerText = isDark ? "â˜€ï¸" : "ğŸŒ™";
	        localStorage.setItem("darkMode", isDark ? "on" : "off");
	    });
	});
</script>

<body>
<button id="darkToggle"
        style="
            position: fixed;
            top: 16px;
            right: 16px;
            z-index: 999;
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        ">
    ğŸŒ™
</button>

<a href="javascript:history.back()">â† ëª©ë¡ìœ¼ë¡œ</a>
<hr>

<!-- =====================
     ë³¸ë¬¸
     ===================== -->
<div class="content-wrapper">
    <div class="article-content"
         th:utext="${content}">
    </div>
</div>

<!-- =====================
     ëŒ“ê¸€ ì˜ì—­
     ===================== -->
<div class="comment-wrapper">

    <!-- ë² ìŠ¤íŠ¸ ëŒ“ê¸€ -->
    <div class="comment-section best"
         th:if="${bestComments != null and !bestComments.isEmpty()}">
        <h3>ğŸ”¥ ë² ìŠ¤íŠ¸ ëŒ“ê¸€</h3>

        <div class="comment-item"
             th:each="c : ${bestComments}">
            <div class="comment-header">
                <span class="comment-writer"
                      th:text="${c.writer}">ì‘ì„±ì</span>
                <span class="comment-like">
                    ğŸ‘ <span th:text="${c.like}">0</span>
                </span>
                <span class="comment-dislike">
                    ğŸ‘ <span th:text="${c.dislike}">0</span>
                </span>
            </div>
            <div class="comment-content"
                 th:text="${c.content}">
                ëŒ“ê¸€ ë‚´ìš©
            </div>
        </div>
    </div>

    <!-- ì¼ë°˜ ëŒ“ê¸€ -->
    <div class="comment-section"
         th:if="${comments != null and !comments.isEmpty()}">
		<h3>ğŸ§µ ëŒ“ê¸€ (<span th:text="${comments.size()}">0</span>)</h3>

        <div class="comment-item"
             th:each="c : ${comments}"
			 th:class="|comment-item
			                 ${c.depth == 1 ? ' reply' : ''}
			                 ${c.blind ? ' blind' : ''}|">
            <div class="comment-header">
                <span class="comment-writer"
                      th:text="${c.writer}">ì‘ì„±ì</span>
                <span class="comment-like">
                    ğŸ‘ <span th:text="${c.like}">0</span>
                </span>
                <span class="comment-dislike">
                    ğŸ‘ <span th:text="${c.dislike}">0</span>
                </span>
            </div>
            <div class="comment-content"
                 th:text="${c.content}">
                ëŒ“ê¸€ ë‚´ìš©
            </div>
        </div>
    </div>

</div>

</body>
</html>
